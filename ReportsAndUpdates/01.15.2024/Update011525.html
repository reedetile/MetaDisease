<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Meta-disease update</title>
    <meta charset="utf-8" />
    <meta name="author" content="Reed Scott" />
    <meta name="date" content="2025-01-10" />
    <script src="Update011525_files/header-attrs-2.28/header-attrs.js"></script>
    <link rel="stylesheet" href="custom.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

.title[
# Meta-disease update
]
.author[
### Reed Scott
]
.institute[
### University of Vermont
]
.date[
### 2025-01-10
]

---




# Goals for today?

1. Background
2. Establishing meta-communities
3. Running simulations

---

# Background
## General Refresher

* Previous studies have shown that biodiversity is an important part disease dynamics
--

* However, none have looked at these within the context of a meta-community
--

* We assert that the *difference* between communities ( `\(\beta\)` diversity ) may play an important role in disease dynamics
--

* In this project we will be building on prior work done by Mark, which established methods for calculating a landscape level `\(R_0\)`
---

# Background
## Study system

* Originally, I had suggest this use a "fake system" with species that acted as charicatures of real species
--

* However, I have found that difficult
--

* Instead, I will focus on a simulation of a real system. I will use 6 real species and 1 real disease. Those are:
  - *P. regilla*
  - *A. boreas*
  - *T. Granulosa*
  - *T. torosa*
  - *R. catesbianus*
  - *R. draytonii*
  - And the amphibian chytrid fungus
* To do this, I will have to use real world parameters of these species, which I will get into later.
---

# Background
## Hypotheses

* Our goal: to understand the how a diverse array of communities can impact disease risk
--

* Our specific hypothesis: as `\(\beta\)` diversity increases, landscape level `\(R_0\)` should decrease

---

# Establishing meta-communities

* Up until now, I feel I've largely glossed over how I formed the simulated metacommunities I want to use for this study.
* I think it's about time I described them in a decent amount of detail, so here goes.

---

# Establishing meta-communities

First, we set up the number of possible species, number of patches, `\(\psi\)` for each species, and rank abundance


``` r
set.seed(1234)
num_patches &lt;- 5 #number of patches in metacommunity
num_spp &lt;- 6 #number of POSSIBLE spp in metacommunity
S &lt;- c(0.83, #PREG
       0.62, #TGRAN
       0.14, #TTOR
       NA, #ABOR
       0.12, #RCAT
       0.64) #RDRAY
S[4] &lt;- runif(n = 1, min = S[5], max = S[3])
K &lt;- c(10,6,5,4,3,2) 
```

---

# Establishing meta-communities
Then we simulate 100 different meta-communities.
I will explain in depth how I did that


``` r
N &lt;- 100 #number of metacommunity simulations to run
meta_comm_list &lt;- vector("list",N)
beta_list &lt;- vector("list", N)
nestedness_list &lt;- vector("list", N)
for(n in 1:N){
  meta_comm &lt;- data.frame(matrix(NA, nrow = num_patches, ncol = num_spp))
  for(i in 1:nrow(meta_comm)){
    for(j in 1:ncol(meta_comm)){
      #determine occurrence and abundance of spp 1
      meta_comm[i,1] &lt;- rbinom(n = 1, size = 1, prob = S[1])
      meta_comm[i,1] &lt;- ifelse(meta_comm[i,1] == 1, K[1],0)
      
      #determine occurrence and abundance of spp2
      meta_comm[i,2] &lt;- rbinom(n = 1, size = 1, prob = S[2])
      meta_comm[i,2] &lt;- ifelse(meta_comm[i,2] == 1, K[2],0)
      
      #determine occurrence and abundance of spp 3
      meta_comm[i,3] &lt;- rbinom(n = 1, size = 1, prob = S[3])
      meta_comm[i,3] &lt;- ifelse(meta_comm[i,3] == 1, K[3],0)
      
      #determine occurrence and abundance of spp 4
      meta_comm[i,4] &lt;- rbinom(n = 1, size = 1, prob = S[4])
      meta_comm[i,4] &lt;- ifelse(meta_comm[i,4] == 1, K[4],0)
      
      #determine occurrence and abundance of spp 5
      meta_comm[i,5] &lt;- rbinom(n = 1, size = 1, prob = S[5])
      meta_comm[i,5] &lt;- ifelse(meta_comm[i,5] == 1, K[5],0)
      
      #determine occurrence and abundance of spp 6
      meta_comm[i,6] &lt;- rbinom(n = 1, size = 1, prob = S[6])
      meta_comm[i,6] &lt;- ifelse(meta_comm[i,6] == 1, K[6],0)
    }
  }
  meta_comm$Patch &lt;- c('Patch1','Patch2','Patch3','Patch4','Patch5')
  colnames(meta_comm) &lt;- c('Spp1','Spp2','Spp3','spp4','spp5','Spp6','PatchID')
  beta_list[[n]] &lt;- mean(betadiver(meta_comm[,1:6], method = 'w'))
  nestedness_list[[n]] &lt;- nestedtemp(comm = meta_comm[,1:6])[7]
  meta_comm_list[[n]] &lt;- meta_comm
}
```

---

class: center, middle

# And voila! Just like that we have 100 simulated meta-communities.
# Now, let's get in to the epidiomoligcal modeling!

---

# The epi. model
## The necessary functions

* This are taken from the .py code provided by Mark. I just translated it to R.
* There are 3 key functions

1 "build_R_with_data" builds the necessary R matrix
--


``` r
build_R_with_data &lt;- function(R0s,b,beta,S,P) {
  fullR &lt;- matrix(data = 0, nrow = P*S, ncol = P*S)
  for (p in 1:P) {
    tR0 &lt;- R0s[p,]
    Rmat &lt;- matrix(data = rep(unlist(tR0),S), nrow = S, ncol = S)
    tb &lt;- b[p,]
    bmat &lt;- matrix(data = rep(unlist(tb),S), nrow = S, ncol = S)
    # I have removed the following code (in .py) but should ask mark if I need to add something for
    # Force of infection
    # tλ = λs[:, p]
    # λmat = np.repeat(tλ, S).reshape(S, S).T
    # λ_ratios = λmat / λmat.T    
    Rmat &lt;- Rmat * bmat
    Rmat[is.nan(Rmat)] = 0
    Rmat[is.infinite(Rmat)] = 0
    Rmat &lt;- as.matrix(Rmat)
    start &lt;- ifelse(p == 1, p,(S*p)-(S-1))
    stop &lt;- start + S - 1
    fullR[start:stop, start:stop] &lt;- Rmat
  }
  
  return(fullR)
}
```

---
# The epi. model
## The necessary functions

* This are taken from the .py code provided by Mark. I just translated it to R.
* There are 3 key functions

2 "build_B_with_data" builds the necessary B matrix


``` r
build_B_with_data &lt;- function(Cmat, phi, b, S, P) {
  Cmat_axis &lt;- colSums(Cmat)
  diag_list &lt;- vector("list",P^2)
  diag_list_names &lt;- array(dim = c(sqrt(length(diag_list)), sqrt(length(diag_list))))
  for (p in 1:P) { #loop over columns
    for (j in 1:P) { #loop over rows
      diag_list_names[j,p] &lt;- paste(p,j,sep="_")
    }
  }
  diag_list_names &lt;- as.vector(diag_list_names)
  names(diag_list) &lt;- diag_list_names
  for (p in 1:P) { #loop over columns
    for (j in 1:P) { #loop over rows
      tZ &lt;- matrix(0,nrow = S, ncol = S)
      new_diag &lt;- array(dim = S)
      new_diag &lt;- if(p == j){
        (-1)*b[p,] - phi*Cmat_axis[p]
        } else{
          phi*Cmat[j,p]
          }
      diag(tZ) &lt;- new_diag
      x &lt;- paste(p,j,sep="_")
      diag_list[[x]] &lt;- tZ 
    }
  }
  diag_matrix &lt;- matrix(diag_list, nrow = P, ncol = P)
  tB &lt;- list()
  for (j in 1:P) {
    tB[[j]] &lt;- matrix(data = unlist(diag_matrix[j,]), nrow = S*P, ncol = S, byrow = T) #looks like this worked!
  }
  
  B &lt;- do.call(cbind, tB[1:P]) #need to determine if this is what B should look like
  return(B) 
}
```

---

# The epi. model
## The necessary functions

* This are taken from the .py code provided by Mark. I just translated it to R.
* There are 3 key functions

3 "landscape_R0" The max eigen value of K is landscape `\(R_0\)`


``` r
landscape_R0 &lt;- function(R0_spps,Cmat,b, beta, phi,S,P){
  R &lt;- build_R_with_data(R0s = R0_spps,
                         b = b,
                         beta = beta,
                         S = S,
                         P = P)
  B &lt;- build_B_with_data(Cmat = Cmat,
                         phi = phi,
                         b = b,
                         S = S,
                         P = P)
  K &lt;- R * solve(-1*B)
  return(list(K = K, R = R, B = B))
}
```

---

# The epi. model
## Establishing species parameters

* We need to establish some relevant information about each species in order to build our models.
--

* Specifically we need
  - Birth rate
  - Death rate
  - Recovery rate
  - Dispersal rate
  - transmission rate
  - Connectivity between patches
  
---

# The Epi model
## Birth rate

* This is pretty simple
* Since we are looking within a season, I set birth rate = 0 for all species

---
# The Epi model
## Death rate

Species        | death rate (d)
---------------|---------------------------------------------------
P. regilla     | 0.024
A. boreas      | 0.0029
L. catesbeianus| 0.144
L. draytonii   | 0.04
T. granulosa   | Between P. regilla and A. boreas
T. torosa      | Between P. regilla and A. boreas
---

# The Epi model
## Recovery rate

* Finding reliable information on the recovery rate of adults has proven... difficult
* I found 1 study and for the rest I assigned random values that I believe are ecologically relevant

Species        | recovery rate (b)
---------------|---------------------------------------------------
P. regilla     | Should be lowest
A. boreas      | Should be lower than L. catesbeianus
L. catesbeianus| 0.012
L. draytonii   | Should be highest
T. granulosa   | Because it is a newt, should be relatively high
T. torosa      | Because it is a newt, should be relatively high

---

# The Epi model
## Transmission rate

* `\(\beta\)` is... hard. and worth talking about for a minute
* Few studies I have found directly state a value for `\(\beta\)`
* So I have elected to use ecological context and "fill in the blanks"
* For this part I make 2 key assumptions
  1. The most abundant species will have the highest `\(\beta\)`
  2. `\(\beta_{ss}\)` will likely be higher than `\(\beta_{si}\)`
  
* I will spare you the code the create the necessary S*S `\(\beta\)` matrix, but I do want to show the resulting matrix and graph

---
# The Epi model
## Transmission rate (cont'd)





<div id="lywhrhkjmu" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#lywhrhkjmu table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#lywhrhkjmu thead, #lywhrhkjmu tbody, #lywhrhkjmu tfoot, #lywhrhkjmu tr, #lywhrhkjmu td, #lywhrhkjmu th {
  border-style: none;
}

#lywhrhkjmu p {
  margin: 0;
  padding: 0;
}

#lywhrhkjmu .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#lywhrhkjmu .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#lywhrhkjmu .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#lywhrhkjmu .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#lywhrhkjmu .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#lywhrhkjmu .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#lywhrhkjmu .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#lywhrhkjmu .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#lywhrhkjmu .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#lywhrhkjmu .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#lywhrhkjmu .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#lywhrhkjmu .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#lywhrhkjmu .gt_spanner_row {
  border-bottom-style: hidden;
}

#lywhrhkjmu .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#lywhrhkjmu .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#lywhrhkjmu .gt_from_md > :first-child {
  margin-top: 0;
}

#lywhrhkjmu .gt_from_md > :last-child {
  margin-bottom: 0;
}

#lywhrhkjmu .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#lywhrhkjmu .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#lywhrhkjmu .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#lywhrhkjmu .gt_row_group_first td {
  border-top-width: 2px;
}

#lywhrhkjmu .gt_row_group_first th {
  border-top-width: 2px;
}

#lywhrhkjmu .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#lywhrhkjmu .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#lywhrhkjmu .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#lywhrhkjmu .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#lywhrhkjmu .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#lywhrhkjmu .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#lywhrhkjmu .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#lywhrhkjmu .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#lywhrhkjmu .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#lywhrhkjmu .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#lywhrhkjmu .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#lywhrhkjmu .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#lywhrhkjmu .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#lywhrhkjmu .gt_left {
  text-align: left;
}

#lywhrhkjmu .gt_center {
  text-align: center;
}

#lywhrhkjmu .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#lywhrhkjmu .gt_font_normal {
  font-weight: normal;
}

#lywhrhkjmu .gt_font_bold {
  font-weight: bold;
}

#lywhrhkjmu .gt_font_italic {
  font-style: italic;
}

#lywhrhkjmu .gt_super {
  font-size: 65%;
}

#lywhrhkjmu .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#lywhrhkjmu .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#lywhrhkjmu .gt_indent_1 {
  text-indent: 5px;
}

#lywhrhkjmu .gt_indent_2 {
  text-indent: 10px;
}

#lywhrhkjmu .gt_indent_3 {
  text-indent: 15px;
}

#lywhrhkjmu .gt_indent_4 {
  text-indent: 20px;
}

#lywhrhkjmu .gt_indent_5 {
  text-indent: 25px;
}

#lywhrhkjmu .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#lywhrhkjmu div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="X1">X1</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="X2">X2</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="X3">X3</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="X4">X4</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="X5">X5</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="X6">X6</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="X1" class="gt_row gt_right">0.005821746</td>
<td headers="X2" class="gt_row gt_right">0.008407052</td>
<td headers="X3" class="gt_row gt_right">0.008061301</td>
<td headers="X4" class="gt_row gt_right">0.006280074</td>
<td headers="X5" class="gt_row gt_right">0.004207801</td>
<td headers="X6" class="gt_row gt_right">0.003371610</td></tr>
    <tr><td headers="X1" class="gt_row gt_right">0.009914103</td>
<td headers="X2" class="gt_row gt_right">0.004345096</td>
<td headers="X3" class="gt_row gt_right">0.008061301</td>
<td headers="X4" class="gt_row gt_right">0.006280074</td>
<td headers="X5" class="gt_row gt_right">0.004207801</td>
<td headers="X6" class="gt_row gt_right">0.003371610</td></tr>
    <tr><td headers="X1" class="gt_row gt_right">0.009914103</td>
<td headers="X2" class="gt_row gt_right">0.008407052</td>
<td headers="X3" class="gt_row gt_right">0.007417258</td>
<td headers="X4" class="gt_row gt_right">0.006280074</td>
<td headers="X5" class="gt_row gt_right">0.004207801</td>
<td headers="X6" class="gt_row gt_right">0.003371610</td></tr>
    <tr><td headers="X1" class="gt_row gt_right">0.009914103</td>
<td headers="X2" class="gt_row gt_right">0.008407052</td>
<td headers="X3" class="gt_row gt_right">0.008061301</td>
<td headers="X4" class="gt_row gt_right">0.005554369</td>
<td headers="X5" class="gt_row gt_right">0.004207801</td>
<td headers="X6" class="gt_row gt_right">0.003371610</td></tr>
    <tr><td headers="X1" class="gt_row gt_right">0.009914103</td>
<td headers="X2" class="gt_row gt_right">0.008407052</td>
<td headers="X3" class="gt_row gt_right">0.008061301</td>
<td headers="X4" class="gt_row gt_right">0.006280074</td>
<td headers="X5" class="gt_row gt_right">0.007709909</td>
<td headers="X6" class="gt_row gt_right">0.003371610</td></tr>
    <tr><td headers="X1" class="gt_row gt_right">0.009914103</td>
<td headers="X2" class="gt_row gt_right">0.008407052</td>
<td headers="X3" class="gt_row gt_right">0.008061301</td>
<td headers="X4" class="gt_row gt_right">0.006280074</td>
<td headers="X5" class="gt_row gt_right">0.004207801</td>
<td headers="X6" class="gt_row gt_right">0.008203863</td></tr>
  </tbody>
  
  
</table>
</div>
---

# The Epi model
## Transmission rate (cont'd)
### Intraspecific Transmission

&lt;img src="Update011525_files/figure-html/graph intra trans-1.png" width="45%" /&gt;
---

# The Epi model
## Transmission rate (cont'd)
### Interspecific Transmission

&lt;img src="Update011525_files/figure-html/graph inter trans-1.png" width="45%" /&gt;
---

# Connectivty of Patches

* I assumed  that all patches had the same connectivity
* I also assumed that the likelihood of staying was higher than the likelihood of moving between patches.
* This resulted in the following matrix:
--

<div id="amuynwljmt" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#amuynwljmt table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#amuynwljmt thead, #amuynwljmt tbody, #amuynwljmt tfoot, #amuynwljmt tr, #amuynwljmt td, #amuynwljmt th {
  border-style: none;
}

#amuynwljmt p {
  margin: 0;
  padding: 0;
}

#amuynwljmt .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#amuynwljmt .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#amuynwljmt .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#amuynwljmt .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#amuynwljmt .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#amuynwljmt .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#amuynwljmt .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#amuynwljmt .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#amuynwljmt .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#amuynwljmt .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#amuynwljmt .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#amuynwljmt .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#amuynwljmt .gt_spanner_row {
  border-bottom-style: hidden;
}

#amuynwljmt .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#amuynwljmt .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#amuynwljmt .gt_from_md > :first-child {
  margin-top: 0;
}

#amuynwljmt .gt_from_md > :last-child {
  margin-bottom: 0;
}

#amuynwljmt .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#amuynwljmt .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#amuynwljmt .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#amuynwljmt .gt_row_group_first td {
  border-top-width: 2px;
}

#amuynwljmt .gt_row_group_first th {
  border-top-width: 2px;
}

#amuynwljmt .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#amuynwljmt .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#amuynwljmt .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#amuynwljmt .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#amuynwljmt .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#amuynwljmt .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#amuynwljmt .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#amuynwljmt .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#amuynwljmt .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#amuynwljmt .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#amuynwljmt .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#amuynwljmt .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#amuynwljmt .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#amuynwljmt .gt_left {
  text-align: left;
}

#amuynwljmt .gt_center {
  text-align: center;
}

#amuynwljmt .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#amuynwljmt .gt_font_normal {
  font-weight: normal;
}

#amuynwljmt .gt_font_bold {
  font-weight: bold;
}

#amuynwljmt .gt_font_italic {
  font-style: italic;
}

#amuynwljmt .gt_super {
  font-size: 65%;
}

#amuynwljmt .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#amuynwljmt .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#amuynwljmt .gt_indent_1 {
  text-indent: 5px;
}

#amuynwljmt .gt_indent_2 {
  text-indent: 10px;
}

#amuynwljmt .gt_indent_3 {
  text-indent: 15px;
}

#amuynwljmt .gt_indent_4 {
  text-indent: 20px;
}

#amuynwljmt .gt_indent_5 {
  text-indent: 25px;
}

#amuynwljmt .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#amuynwljmt div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="X1">X1</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="X2">X2</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="X3">X3</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="X4">X4</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="X5">X5</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="X1" class="gt_row gt_right">0.61360430</td>
<td headers="X2" class="gt_row gt_right">0.01327004</td>
<td headers="X3" class="gt_row gt_right">0.01327004</td>
<td headers="X4" class="gt_row gt_right">0.01327004</td>
<td headers="X5" class="gt_row gt_right">0.01327004</td></tr>
    <tr><td headers="X1" class="gt_row gt_right">0.01327004</td>
<td headers="X2" class="gt_row gt_right">0.61360430</td>
<td headers="X3" class="gt_row gt_right">0.01327004</td>
<td headers="X4" class="gt_row gt_right">0.01327004</td>
<td headers="X5" class="gt_row gt_right">0.01327004</td></tr>
    <tr><td headers="X1" class="gt_row gt_right">0.01327004</td>
<td headers="X2" class="gt_row gt_right">0.01327004</td>
<td headers="X3" class="gt_row gt_right">0.61360430</td>
<td headers="X4" class="gt_row gt_right">0.01327004</td>
<td headers="X5" class="gt_row gt_right">0.01327004</td></tr>
    <tr><td headers="X1" class="gt_row gt_right">0.01327004</td>
<td headers="X2" class="gt_row gt_right">0.01327004</td>
<td headers="X3" class="gt_row gt_right">0.01327004</td>
<td headers="X4" class="gt_row gt_right">0.61360430</td>
<td headers="X5" class="gt_row gt_right">0.01327004</td></tr>
    <tr><td headers="X1" class="gt_row gt_right">0.01327004</td>
<td headers="X2" class="gt_row gt_right">0.01327004</td>
<td headers="X3" class="gt_row gt_right">0.01327004</td>
<td headers="X4" class="gt_row gt_right">0.01327004</td>
<td headers="X5" class="gt_row gt_right">0.61360430</td></tr>
  </tbody>
  
  
</table>
</div>

---

# The Simulation

* Okay, so everything is coming to a head.
--

* We have built the meta-communities, and established the necessary parameters.
--

* Now it's time to read it all into a simulation
--


``` r
# Simulation over metacommunities
result2 &lt;- data.frame(matrix(data = NA, nrow = length(meta_comm_list), ncol = 18))
colnames(result2) &lt;- c("TotalAbundance","PREG","TGRAN","TTOR","ABOR","RCAT","RDRAY",
                       "PREG_rel","TGRAN_rel","TTOR_rel","ABOR_rel","RCAT_rel","RDRAY_rel",
                       "BetaDiversity","Gamma_diversity",
                       "Beta_relative","LandscapeR0", "MetaCommID")
for (a in 1:length(meta_comm_list)) {
  S &lt;- ceiling(meta_comm_list[[a]][,1:6]*c(0.8,0.85,0.9,0.93,0.95,.99)) #value of susceptibles
  I &lt;- meta_comm_list[[a]][,1:6] - S #value of infecteds
  N &lt;- S+I #total pop of a patch
  S &lt;- as.matrix(S)
  I &lt;- as.matrix(I)
  N &lt;- as.matrix(N)
  N_meta &lt;- colSums(N)
  phi &lt;- ifelse(N_meta &gt; 0, psi/N_meta, 0) #get dispersal rate
  r0_species_patch &lt;- matrix(nrow = num_patches, ncol = num_spp) #create empty matrix, later will calc R0
  b &lt;- matrix(nrow = num_patches, ncol = num_spp) #create empty matrix, later will calc b
  for (p in 1:num_patches) {
    for(q in 1:num_patches){
      for (i in 1:num_spp) {
        for (j in 1:num_spp) {
          #establish parameters for time t of species s
          connectivity_s &lt;- phi[i]*sum(-c[p,q]*S[p,i] + c[q,p]*S[q,i])
          connectivity_I &lt;- phi[i]*sum(-c[p,q]*I[p,i] + c[q,p]*I[q,i])
          birth_rate &lt;- birth[i]*N[p,i]
          death_s &lt;- d[i]*S[p,i]
          loss_I &lt;- (v[i]+d[i])*I[p,i]
          FI &lt;- ifelse(N[p,j] &gt; 0, beta[i,j]*S[p,i]*(I[p,j]/N[p,j]), 0)
          
          #change in rate of susceptible + infectious individuals
          
          #calculate R0 for each species at each patch
          b[p,i] &lt;- v[i] + d[i] #gets loss rate
          r0_species_patch[p,i] &lt;- beta[i,i]/b[p,i]
        }
      }
    }
  }
  
  result2[a,1] &lt;- sum(N) #total abundance
  #abdunance of each species
  for (i in 2:(1+num_spp)) {
    result2[a,i] &lt;- sum(N[,i-1])
    result2[a,(i+num_spp)] &lt;- result2[a,i]/result2[a,1]
  }
  
  #add beta diversity
  beta_diversity &lt;- betadiver(N, method = 'w')
  result2[a,14] &lt;- mean(beta_diversity, na.rm =T) #beta diversity
  result2[a,15] &lt;- sum(ifelse(result2[a,1:6] &gt; 0, 1,0)) #gamma diversity
  
  result2[a,16] &lt;- result2[a,7]/result2[a,8] #beta diversity / total abundance

    #calculate landscape R0
  r0_landscape &lt;- landscape_R0(R0_spps = r0_species_patch,
                               Cmat = c,
                               b = b,
                               beta = beta,
                               phi = phi,
                               S = num_spp,
                               P = num_patches)
  
  result2[a,17] &lt;- eigen(r0_landscape[[1]])$values[1] #landscape R0
  result2[a,18] &lt;- a #metacommunity ID
}
```

---

# The Simulation
## Results

<div id="lvgzbtzram" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#lvgzbtzram table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#lvgzbtzram thead, #lvgzbtzram tbody, #lvgzbtzram tfoot, #lvgzbtzram tr, #lvgzbtzram td, #lvgzbtzram th {
  border-style: none;
}

#lvgzbtzram p {
  margin: 0;
  padding: 0;
}

#lvgzbtzram .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#lvgzbtzram .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#lvgzbtzram .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#lvgzbtzram .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#lvgzbtzram .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#lvgzbtzram .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#lvgzbtzram .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#lvgzbtzram .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#lvgzbtzram .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#lvgzbtzram .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#lvgzbtzram .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#lvgzbtzram .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#lvgzbtzram .gt_spanner_row {
  border-bottom-style: hidden;
}

#lvgzbtzram .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#lvgzbtzram .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#lvgzbtzram .gt_from_md > :first-child {
  margin-top: 0;
}

#lvgzbtzram .gt_from_md > :last-child {
  margin-bottom: 0;
}

#lvgzbtzram .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#lvgzbtzram .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#lvgzbtzram .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#lvgzbtzram .gt_row_group_first td {
  border-top-width: 2px;
}

#lvgzbtzram .gt_row_group_first th {
  border-top-width: 2px;
}

#lvgzbtzram .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#lvgzbtzram .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#lvgzbtzram .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#lvgzbtzram .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#lvgzbtzram .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#lvgzbtzram .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#lvgzbtzram .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#lvgzbtzram .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#lvgzbtzram .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#lvgzbtzram .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#lvgzbtzram .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#lvgzbtzram .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#lvgzbtzram .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#lvgzbtzram .gt_left {
  text-align: left;
}

#lvgzbtzram .gt_center {
  text-align: center;
}

#lvgzbtzram .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#lvgzbtzram .gt_font_normal {
  font-weight: normal;
}

#lvgzbtzram .gt_font_bold {
  font-weight: bold;
}

#lvgzbtzram .gt_font_italic {
  font-style: italic;
}

#lvgzbtzram .gt_super {
  font-size: 65%;
}

#lvgzbtzram .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#lvgzbtzram .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#lvgzbtzram .gt_indent_1 {
  text-indent: 5px;
}

#lvgzbtzram .gt_indent_2 {
  text-indent: 10px;
}

#lvgzbtzram .gt_indent_3 {
  text-indent: 15px;
}

#lvgzbtzram .gt_indent_4 {
  text-indent: 20px;
}

#lvgzbtzram .gt_indent_5 {
  text-indent: 25px;
}

#lvgzbtzram .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#lvgzbtzram div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="TotalAbundance">TotalAbundance</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="PREG">PREG</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="TGRAN">TGRAN</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="TTOR">TTOR</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="ABOR">ABOR</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="RCAT">RCAT</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="RDRAY">RDRAY</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="PREG_rel">PREG_rel</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="TGRAN_rel">TGRAN_rel</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="TTOR_rel">TTOR_rel</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="ABOR_rel">ABOR_rel</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="RCAT_rel">RCAT_rel</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="RDRAY_rel">RDRAY_rel</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="BetaDiversity">BetaDiversity</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Gamma_diversity">Gamma_diversity</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="Beta_relative">Beta_relative</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="LandscapeR0">LandscapeR0</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="MetaCommID">MetaCommID</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="TotalAbundance" class="gt_row gt_right">88</td>
<td headers="PREG" class="gt_row gt_right">40</td>
<td headers="TGRAN" class="gt_row gt_right">30</td>
<td headers="TTOR" class="gt_row gt_right">5</td>
<td headers="ABOR" class="gt_row gt_right">0</td>
<td headers="RCAT" class="gt_row gt_right">3</td>
<td headers="RDRAY" class="gt_row gt_right">10</td>
<td headers="PREG_rel" class="gt_row gt_right">0.4545455</td>
<td headers="TGRAN_rel" class="gt_row gt_right">0.3409091</td>
<td headers="TTOR_rel" class="gt_row gt_right">0.05681818</td>
<td headers="ABOR_rel" class="gt_row gt_right">0.0000000</td>
<td headers="RCAT_rel" class="gt_row gt_right">0.03409091</td>
<td headers="RDRAY_rel" class="gt_row gt_right">0.11363636</td>
<td headers="BetaDiversity" class="gt_row gt_right">0.1857143</td>
<td headers="Gamma_diversity" class="gt_row gt_right">5</td>
<td headers="Beta_relative" class="gt_row gt_right">22.00</td>
<td headers="LandscapeR0" class="gt_row gt_right">0.3831157</td>
<td headers="MetaCommID" class="gt_row gt_right">1</td></tr>
    <tr><td headers="TotalAbundance" class="gt_row gt_right">77</td>
<td headers="PREG" class="gt_row gt_right">50</td>
<td headers="TGRAN" class="gt_row gt_right">12</td>
<td headers="TTOR" class="gt_row gt_right">5</td>
<td headers="ABOR" class="gt_row gt_right">8</td>
<td headers="RCAT" class="gt_row gt_right">0</td>
<td headers="RDRAY" class="gt_row gt_right">2</td>
<td headers="PREG_rel" class="gt_row gt_right">0.6493506</td>
<td headers="TGRAN_rel" class="gt_row gt_right">0.1558442</td>
<td headers="TTOR_rel" class="gt_row gt_right">0.06493506</td>
<td headers="ABOR_rel" class="gt_row gt_right">0.1038961</td>
<td headers="RCAT_rel" class="gt_row gt_right">0.00000000</td>
<td headers="RDRAY_rel" class="gt_row gt_right">0.02597403</td>
<td headers="BetaDiversity" class="gt_row gt_right">0.4333333</td>
<td headers="Gamma_diversity" class="gt_row gt_right">5</td>
<td headers="Beta_relative" class="gt_row gt_right">3.08</td>
<td headers="LandscapeR0" class="gt_row gt_right">0.2870382</td>
<td headers="MetaCommID" class="gt_row gt_right">2</td></tr>
    <tr><td headers="TotalAbundance" class="gt_row gt_right">75</td>
<td headers="PREG" class="gt_row gt_right">30</td>
<td headers="TGRAN" class="gt_row gt_right">24</td>
<td headers="TTOR" class="gt_row gt_right">5</td>
<td headers="ABOR" class="gt_row gt_right">0</td>
<td headers="RCAT" class="gt_row gt_right">6</td>
<td headers="RDRAY" class="gt_row gt_right">10</td>
<td headers="PREG_rel" class="gt_row gt_right">0.4000000</td>
<td headers="TGRAN_rel" class="gt_row gt_right">0.3200000</td>
<td headers="TTOR_rel" class="gt_row gt_right">0.06666667</td>
<td headers="ABOR_rel" class="gt_row gt_right">0.0000000</td>
<td headers="RCAT_rel" class="gt_row gt_right">0.08000000</td>
<td headers="RDRAY_rel" class="gt_row gt_right">0.13333333</td>
<td headers="BetaDiversity" class="gt_row gt_right">0.3592857</td>
<td headers="Gamma_diversity" class="gt_row gt_right">5</td>
<td headers="Beta_relative" class="gt_row gt_right">25.00</td>
<td headers="LandscapeR0" class="gt_row gt_right">0.3831157</td>
<td headers="MetaCommID" class="gt_row gt_right">3</td></tr>
    <tr><td headers="TotalAbundance" class="gt_row gt_right">59</td>
<td headers="PREG" class="gt_row gt_right">40</td>
<td headers="TGRAN" class="gt_row gt_right">6</td>
<td headers="TTOR" class="gt_row gt_right">5</td>
<td headers="ABOR" class="gt_row gt_right">0</td>
<td headers="RCAT" class="gt_row gt_right">0</td>
<td headers="RDRAY" class="gt_row gt_right">8</td>
<td headers="PREG_rel" class="gt_row gt_right">0.6779661</td>
<td headers="TGRAN_rel" class="gt_row gt_right">0.1016949</td>
<td headers="TTOR_rel" class="gt_row gt_right">0.08474576</td>
<td headers="ABOR_rel" class="gt_row gt_right">0.0000000</td>
<td headers="RCAT_rel" class="gt_row gt_right">0.00000000</td>
<td headers="RDRAY_rel" class="gt_row gt_right">0.13559322</td>
<td headers="BetaDiversity" class="gt_row gt_right">0.4166667</td>
<td headers="Gamma_diversity" class="gt_row gt_right">4</td>
<td headers="Beta_relative" class="gt_row gt_right">11.80</td>
<td headers="LandscapeR0" class="gt_row gt_right">0.3831157</td>
<td headers="MetaCommID" class="gt_row gt_right">4</td></tr>
    <tr><td headers="TotalAbundance" class="gt_row gt_right">66</td>
<td headers="PREG" class="gt_row gt_right">30</td>
<td headers="TGRAN" class="gt_row gt_right">18</td>
<td headers="TTOR" class="gt_row gt_right">0</td>
<td headers="ABOR" class="gt_row gt_right">8</td>
<td headers="RCAT" class="gt_row gt_right">0</td>
<td headers="RDRAY" class="gt_row gt_right">10</td>
<td headers="PREG_rel" class="gt_row gt_right">0.4545455</td>
<td headers="TGRAN_rel" class="gt_row gt_right">0.2727273</td>
<td headers="TTOR_rel" class="gt_row gt_right">0.00000000</td>
<td headers="ABOR_rel" class="gt_row gt_right">0.1212121</td>
<td headers="RCAT_rel" class="gt_row gt_right">0.00000000</td>
<td headers="RDRAY_rel" class="gt_row gt_right">0.15151515</td>
<td headers="BetaDiversity" class="gt_row gt_right">0.3466667</td>
<td headers="Gamma_diversity" class="gt_row gt_right">4</td>
<td headers="Beta_relative" class="gt_row gt_right">22.00</td>
<td headers="LandscapeR0" class="gt_row gt_right">0.7170250</td>
<td headers="MetaCommID" class="gt_row gt_right">5</td></tr>
    <tr><td headers="TotalAbundance" class="gt_row gt_right">56</td>
<td headers="PREG" class="gt_row gt_right">30</td>
<td headers="TGRAN" class="gt_row gt_right">12</td>
<td headers="TTOR" class="gt_row gt_right">5</td>
<td headers="ABOR" class="gt_row gt_right">0</td>
<td headers="RCAT" class="gt_row gt_right">3</td>
<td headers="RDRAY" class="gt_row gt_right">6</td>
<td headers="PREG_rel" class="gt_row gt_right">0.5357143</td>
<td headers="TGRAN_rel" class="gt_row gt_right">0.2142857</td>
<td headers="TTOR_rel" class="gt_row gt_right">0.08928571</td>
<td headers="ABOR_rel" class="gt_row gt_right">0.0000000</td>
<td headers="RCAT_rel" class="gt_row gt_right">0.05357143</td>
<td headers="RDRAY_rel" class="gt_row gt_right">0.10714286</td>
<td headers="BetaDiversity" class="gt_row gt_right">0.6700000</td>
<td headers="Gamma_diversity" class="gt_row gt_right">5</td>
<td headers="Beta_relative" class="gt_row gt_right">11.20</td>
<td headers="LandscapeR0" class="gt_row gt_right">0.3831157</td>
<td headers="MetaCommID" class="gt_row gt_right">6</td></tr>
  </tbody>
  
  
</table>
</div>
        
---

class: center, middle
# Are you excited? Because I'm excited
## Let's look at some graph

---

# Graphing

* First, I wanted to check the relationship between `\(\beta\)` diversity and `\(R_{0L}\)`

&lt;img src="figs/beta_plot.png" width="75%" /&gt;
---

# Graphing
* Hmm, not what we predicted. I wonder if abundance has an affect

&lt;img src="figs/abun_R0_plot.png" width="75%" /&gt;

---

# Graphing

* This made me think, "maybe we should correct `\(\beta\)` diversity for abundance"

&lt;img src="figs/beta_relative.png" width="75%" /&gt;

---

# Graphing

* Then I thought, "Maybe we should look at `\(\gamma\)` diversity too!"

&lt;img src="figs/gamma_plot.png" width="75%" /&gt;

---

# Graphing

* Then I wanted to explore species effects

&lt;img src="figs/PREG_plots.png" width="75%" /&gt;

---

# Graphing

* Then I wanted to explore species effects

&lt;img src="figs/ABOR_plots.png" width="75%" /&gt;
]

---

# Graphing

* Then I wanted to explore species effects

&lt;img src="figs/RCAT_plots.png" width="75%" /&gt;
]

---

# Graphing

* Then I wanted to explore species effects

&lt;img src="figs/RDRAY_plots.png" width="75%" /&gt;

---
                  
# Graphing

* Then I wanted to explore species effects

&lt;img src="figs/TTOR_plots.png" width="75%" /&gt;

---
                  
# Graphing

* Then I wanted to explore species effects

&lt;img src="figs/TGRAN_plots.png" width="75%" /&gt;

---

# Next Steps

* Overall, I think this is big progress for this project
--

* I think there are a couple next steps / things to consider
--

* Do we want to compare different disease models?
  - Density dependent?
  - Environmental pool?
--

* Do we want to adjust community parameters? 
  - Probably better to use Mark's info on dispersal (if we can)
  - Any other adjustments to community parameters you'd like to see?
--

* Do we want to adjust epi model?
  - Any errors you may have noticed in what I've done?
  - Things you're curious to compare?
--

* Would we like to do some form of analysis? I think this could just be straightforward linear models
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create();
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
